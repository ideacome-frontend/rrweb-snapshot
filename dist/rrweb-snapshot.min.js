var rrwebSnapshot=function(e){"use strict";var t;(t=e.NodeType||(e.NodeType={}))[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment";var r=1,n=RegExp("[^a-z1-6-_]");function a(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).reduce(function(e,t){return e+(function(e){return"styleSheet"in e}(r=t)?a(r.styleSheet)||"":r.cssText);var r},""):null}catch(e){return null}}var i=/url\((?:'([^']*)'|"([^"]*)"|([^)]*))\)/gm,o=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,s=/^(data:)([\w\/\+\-]+);(charset=[\w-]+|base64).*,(.*)/i;function c(e,t){return(e||"").replace(i,function(e,r,n,a){var i,c=r||n||a;if(!c)return e;if(!o.test(c))return"url('"+c+"')";if(s.test(c))return"url("+c+")";if("/"===c[0])return"url('"+(((i=t).indexOf("//")>-1?i.split("/").slice(0,3).join("/"):i.split("/")[0]).split("?")[0]+c)+"')";var u=t.split("/"),f=c.split("/");u.pop();for(var l=0,p=f;l<p.length;l++){var m=p[l];"."!==m&&(".."===m?u.pop():u.push(m))}return"url('"+u.join("/")+"')"})}function u(e,t){if(!t||""===t.trim())return t;var r=e.createElement("a");return r.href=t,r.href}function f(e,t,r){return"src"===t||"href"===t&&r?u(e,r):"srcset"===t&&r?function(e,t){return""===t.trim()?t:t.split(",").map(function(t){var r=t.trimLeft().trimRight().split(" ");return 2===r.length?u(e,r[0])+" "+r[1]:1===r.length?""+u(e,r[0]):""}).join(", ")}(e,r):"style"===t&&r?c(r,location.href):r}function l(t,r,i,o,s,u){switch(void 0===s&&(s={}),t.nodeType){case t.DOCUMENT_NODE:return{type:e.NodeType.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:e.NodeType.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId};case t.ELEMENT_NODE:var l=!1;"string"==typeof i?l=t.classList.contains(i):t.classList.forEach(function(e){i.test(e)&&(l=!0)});for(var p=function(e){var t=e.toLowerCase().trim();return n.test(t)?"div":t}(t.tagName),m={},d=0,h=Array.from(t.attributes);d<h.length;d++){var v=h[d],y=v.name,g=v.value;m[y]=f(r,y,g)}if("link"===p&&o){var T,N=Array.from(r.styleSheets).find(function(e){return e.href===t.href});(T=a(N))&&(delete m.rel,delete m.href,m._cssText=c(T,N.href))}if("style"===p&&t.sheet&&!(t.innerText||t.textContent||"").trim().length)(T=a(t.sheet))&&(m._cssText=c(T,location.href));if("input"===p||"textarea"===p||"select"===p){g=t.value;"radio"!==m.type&&"checkbox"!==m.type&&"submit"!==m.type&&"button"!==m.type&&g?m.value=s[m.type]||s[p]?"*".repeat(g.length):g:t.checked&&(m.checked=t.checked)}if("option"===p){var E=t.parentElement;m.value===E.value&&(m.selected=t.selected)}if("canvas"===p&&u&&(m.rr_dataURL=t.toDataURL()),"audio"!==p&&"video"!==p||(m.rr_mediaState=t.paused?"paused":"played"),t.scrollLeft&&(m.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(m.rr_scrollTop=t.scrollTop),l){var b=t.getBoundingClientRect(),x=b.width,C=b.height;m.rr_width=x+"px",m.rr_height=C+"px"}return{type:e.NodeType.Element,tagName:p,attributes:m,childNodes:[],isSVG:(A=t,"svg"===A.tagName||A instanceof SVGElement||void 0),needBlock:l};case t.TEXT_NODE:var _=t.parentNode&&t.parentNode.tagName,w=t.textContent,D="STYLE"===_||void 0;return D&&w&&(w=c(w,location.href)),"SCRIPT"===_&&(w="SCRIPT_PLACEHOLDER"),{type:e.NodeType.Text,textContent:w||"",isStyle:D};case t.CDATA_SECTION_NODE:return{type:e.NodeType.CDATA,textContent:""};case t.COMMENT_NODE:return{type:e.NodeType.Comment,textContent:t.textContent||""};default:return!1}var A}function p(t,n,a,i,o,s,c,u){void 0===o&&(o=!1),void 0===s&&(s=!0);var f,m=l(t,n,i,s,c,u||!1);if(!m)return console.warn(t,"not serialized"),null;f="__sn"in t?t.__sn.id:r++;var d=Object.assign(m,{id:f});t.__sn=d,a[f]=t;var h=!o;if(d.type===e.NodeType.Element&&(h=h&&!d.needBlock,delete d.needBlock),(d.type===e.NodeType.Document||d.type===e.NodeType.Element)&&h)for(var v=0,y=Array.from(t.childNodes);v<y.length;v++){var g=p(y[v],n,a,i,o,s,c,u);g&&d.childNodes.push(g)}return d}var m=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function d(e,t){void 0===t&&(t={});var r=1,n=1;function a(e){var t=e.match(/\n/g);t&&(r+=t.length);var a=e.lastIndexOf("\n");n=-1===a?n+e.length:e.length-a}function i(){var e={line:r,column:n};return function(t){return t.position=new o(e),d(),t}}var o=function(){return function(e){this.start=e,this.end={line:r,column:n},this.source=t.source}}();o.prototype.content=e;var s=[];function c(a){var i=new Error(t.source+":"+r+":"+n+": "+a);if(i.reason=a,i.filename=t.source,i.line=r,i.column=n,i.source=e,!t.silent)throw i;s.push(i)}function u(){return p(/^{\s*/)}function f(){return p(/^}/)}function l(){var t,r=[];for(d(),v(r);e.length&&"}"!==e.charAt(0)&&(t=D()||A());)!1!==t&&(r.push(t),v(r));return r}function p(t){var r=t.exec(e);if(r){var n=r[0];return a(n),e=e.slice(n.length),r}}function d(){p(/^\s*/)}function v(e){var t;for(void 0===e&&(e=[]);t=y();)!1!==t&&e.push(t),t=y();return e}function y(){var t=i();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var r=2;""!==e.charAt(r)&&("*"!==e.charAt(r)||"/"!==e.charAt(r+1));)++r;if(r+=2,""===e.charAt(r-1))return c("End of comment missing");var o=e.slice(2,r-2);return n+=2,a(o),e=e.slice(r),n+=2,t({type:"comment",comment:o})}}function g(){var e=p(/^([^{]+)/);if(e)return h(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(e){return e.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(e){return e.replace(/\u200C/g,",")})}function T(){var e=i(),t=p(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var r=h(t[0]);if(!p(/^:\s*/))return c("property missing ':'");var n=p(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),a=e({type:"declaration",property:r.replace(m,""),value:n?h(n[0]).replace(m,""):""});return p(/^[;\s]*/),a}}function N(){var e,t=[];if(!u())return c("missing '{'");for(v(t);e=T();)!1!==e&&(t.push(e),v(t)),e=T();return f()?t:c("missing '}'")}function E(){for(var e,t=[],r=i();e=p(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),p(/^,\s*/);if(t.length)return r({type:"keyframe",values:t,declarations:N()})}var b,x=w("import"),C=w("charset"),_=w("namespace");function w(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var r=i(),n=p(t);if(n){var a={type:e};return a[e]=n[1].trim(),r(a)}}}function D(){if("@"===e[0])return function(){var e=i(),t=p(/^@([-\w]+)?keyframes\s*/);if(t){var r=t[1];if(!(t=p(/^([-\w]+)\s*/)))return c("@keyframes missing name");var n,a=t[1];if(!u())return c("@keyframes missing '{'");for(var o=v();n=E();)o.push(n),o=o.concat(v());return f()?e({type:"keyframes",name:a,vendor:r,keyframes:o}):c("@keyframes missing '}'")}}()||function(){var e=i(),t=p(/^@media *([^{]+)/);if(t){var r=h(t[1]);if(!u())return c("@media missing '{'");var n=v().concat(l());return f()?e({type:"media",media:r,rules:n}):c("@media missing '}'")}}()||function(){var e=i(),t=p(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:h(t[1]),media:h(t[2])})}()||function(){var e=i(),t=p(/^@supports *([^{]+)/);if(t){var r=h(t[1]);if(!u())return c("@supports missing '{'");var n=v().concat(l());return f()?e({type:"supports",supports:r,rules:n}):c("@supports missing '}'")}}()||x()||C()||_()||function(){var e=i(),t=p(/^@([-\w]+)?document *([^{]+)/);if(t){var r=h(t[1]),n=h(t[2]);if(!u())return c("@document missing '{'");var a=v().concat(l());return f()?e({type:"document",document:n,vendor:r,rules:a}):c("@document missing '}'")}}()||function(){var e=i();if(p(/^@page */)){var t=g()||[];if(!u())return c("@page missing '{'");for(var r,n=v();r=T();)n.push(r),n=n.concat(v());return f()?e({type:"page",selectors:t,declarations:n}):c("@page missing '}'")}}()||function(){var e=i();if(p(/^@host\s*/)){if(!u())return c("@host missing '{'");var t=v().concat(l());return f()?e({type:"host",rules:t}):c("@host missing '}'")}}()||function(){var e=i();if(p(/^@font-face\s*/)){if(!u())return c("@font-face missing '{'");for(var t,r=v();t=T();)r.push(t),r=r.concat(v());return f()?e({type:"font-face",declarations:r}):c("@font-face missing '}'")}}()}function A(){var e=i(),t=g();return t?(v(),e({type:"rule",selectors:t,declarations:N()})):c("selector missing")}return function e(t,r){var n=t&&"string"==typeof t.type;var a=n?t:r;for(var i=0,o=Object.keys(t);i<o.length;i++){var s=o[i],c=t[s];Array.isArray(c)?c.forEach(function(t){e(t,a)}):c&&"object"==typeof c&&e(c,a)}n&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:r||null});return t}((b=l(),{type:"stylesheet",stylesheet:{source:t.source,rules:b,parsingErrors:s}}))}function h(e){return e?e.replace(/^\s+|\s+$/g,""):""}var v={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var y=/([^\\]):hover/g;function g(e){var t=d(e,{silent:!0});return t.stylesheet?(t.stylesheet.rules.forEach(function(t){"selectors"in t&&(t.selectors||[]).forEach(function(t){if(y.test(t)){var r=t.replace(y,"$1.\\:hover");e=e.replace(t,t+", "+r)}})}),e):e}function T(t,r,n){switch(t.type){case e.NodeType.Document:return r.implementation.createDocument(null,"",null);case e.NodeType.DocumentType:return r.implementation.createDocumentType(t.name,t.publicId,t.systemId);case e.NodeType.Element:var a,i=function(e){var t=v[e.tagName]?v[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(t);a=t.isSVG?r.createElementNS("http://www.w3.org/2000/svg",i):r.createElement(i);var o=function(e){if(!t.attributes.hasOwnProperty(e))return"continue";var o=t.attributes[e];if(o="boolean"==typeof o||"number"==typeof o?"":o,e.startsWith("rr_")){if("canvas"===i&&"rr_dataURL"===e){var s=document.createElement("img");s.src=o,s.onload=function(){var e=a.getContext("2d");e&&e.drawImage(s,0,0,s.width,s.height)}}if("rr_width"===e&&(a.style.width=o),"rr_height"===e&&(a.style.height=o),"rr_mediaState"===e)switch(o){case"played":a.play();case"paused":a.pause()}}else{var c="textarea"===i&&"value"===e,u="style"===i&&"_cssText"===e;if(u&&n&&(o=g(o)),c||u){for(var f=r.createTextNode(o),l=0,p=Array.from(a.childNodes);l<p.length;l++){var m=p[l];m.nodeType===a.TEXT_NODE&&a.removeChild(m)}return a.appendChild(f),"continue"}try{t.isSVG&&"xlink:href"===e?a.setAttributeNS("http://www.w3.org/1999/xlink",e,o):"onload"===e||"onclick"===e||"onmouse"===e.substring(0,7)?a.setAttribute("_"+e,o):a.setAttribute(e,o)}catch(e){}}};for(var s in t.attributes)o(s);return a;case e.NodeType.Text:return r.createTextNode(t.isStyle&&n?g(t.textContent):t.textContent);case e.NodeType.CDATA:return r.createCDATASection(t.textContent);case e.NodeType.Comment:return r.createComment(t.textContent);default:return null}}function N(t,r,n,a,i){void 0===a&&(a=!1),void 0===i&&(i=!0);var o=T(t,r,i);if(!o)return null;if(t.type===e.NodeType.Document&&(r.close(),r.open(),o=r),o.__sn=t,n[t.id]=o,(t.type===e.NodeType.Document||t.type===e.NodeType.Element)&&!a)for(var s=0,c=t.childNodes;s<c.length;s++){var u=c[s],f=N(u,r,n,!1,i);f?o.appendChild(f):console.warn("Failed to rebuild",u)}return o}return e.snapshot=function(e,t,r,n,a){void 0===t&&(t="rr-block"),void 0===r&&(r=!0);var i={};return[p(e,e,i,t,!1,r,!0===n?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===n?{}:n,a),i]},e.serializeNodeWithId=p,e.rebuild=function(t,r,n,a){void 0===a&&(a=!0);var i={},o=N(t,r,i,!1,a);return function(e,t){for(var r in e)e[r]&&(n=e[r],t(n));var n}(i,function(t){n&&n(t),function(t){var r=t.__sn;if(r.type===e.NodeType.Element){var n=t;for(var a in r.attributes)if(r.attributes.hasOwnProperty(a)&&a.startsWith("rr_")){var i=r.attributes[a];"rr_scrollLeft"===a&&(n.scrollLeft=i),"rr_scrollTop"===a&&(n.scrollTop=i)}}}(t)}),[o,i]},e.buildNodeWithSN=N,e.addHoverClass=g,e.transformAttribute=f,e.visitSnapshot=function(t,r){!function t(n){r(n),n.type!==e.NodeType.Document&&n.type!==e.NodeType.Element||n.childNodes.forEach(t)}(t)},e}({});
//# sourceMappingURL=rrweb-snapshot.min.js.map
